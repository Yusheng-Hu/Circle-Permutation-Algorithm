name: Circle-PP-CP-Hybrid-Performance-Benchmark

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  benchmark-validation:
    name: Ubuntu-Linux Performance Test (N=14)
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Install Dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential

    - name: Compile PP+CP Hybrid Engine
      # Using g++ with -O3 for maximum optimization
      run: |
        g++ -O3 cpp/pure_circle.cpp -o pure_circle_linux -lpthread

    - name: Execute High-Throughput Benchmark
      # Measure Giga-perms/sec on standard Linux environment
      run: |
        ./pure_circle_linux

    - name: Archive Benchmark Artifact
      uses: actions/upload-artifact@v4
      with:
        name: ubuntu-linux-benchmark-binary
        path: pure_circle_linux
